import React from 'react'
import { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { getSpecificBookByIdAction } from '../actions/booksAction';
export default function Description({ match }) {
  const bookid = match.params.id;

  const dispatch = useDispatch();

  const getbookstate = useSelector(state => state.getBookByIdReducer);
  const { book, loading, error } = getbookstate;

  useEffect(() => {
    dispatch(getSpecificBookByIdAction(bookid));
  }, [])

  return (
    <div>
      {loading ? (<h1>Loading....</h1>) : error ? (<h1>{error}</h1>) : (
        <div className='row'>
          <div className='col-md-6'>
            <div className='card m-2 p-5'>
              <h1>{book.name}</h1>
              <img src={book.image} className='img-fluid mx-5 my-2 w-75 imgdesc' />
              <p>{book.description}</p>
            </div>
          </div>

          <div className='col-md-6'>
            <div className="m-2 bookdesc">
              <h1>Price : {book.price}</h1>
              <hr />
              <h1>Select Quantity</h1>
              <select>
                {[...Array(book.stock)].map((item, index) => {
                  return <option key={index} value={index + 1}>{index + 1}</option>
                })}
              </select>
              <hr />
              <button className='btn btn-primary'>Add to Cart</button>
              <hr />
            </div>
          </div>
        </div>
      )}
    </div>

  )
}
