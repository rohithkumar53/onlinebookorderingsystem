const mongoose = require("mongoose");
const User= require("../models/userModel");
const bcrypt= require("bcrypt");

exports.registration= async (req, res)=>{
    try {
        const {name, email, password}=req.body;
        const matchuser=await User.findOne({email});
        if(matchuser){
            return res.status(406).json({error: "Email already registered!!"});
        }
        const hashedpwd= await bcrypt.hash(password, 10);
        const newuser= new User({
            name,
            email,
            password: hashedpwd
        });
        newuser.save().then(user => {
            console.log(user);
            res.json(user)
            })
            .catch(error => res.status(406).json({error: error}));
    } catch (error) {
        return res.status(406).json({error: error.message});
    }
}